{"script_uid":"humidifier-att34-fdf449-gsdf-1f5","category":[{"iso":"ru","value":"/Умный дом"},{"iso":"en","value":"/Smart Home"},{"iso":"es","value":"/Casa inteligente"},{"iso":"de","value":"/Smart Home"}],"name":[{"iso":"ru","value":"Увлажнитель воздуха"},{"iso":"en","value":"Air humidifier"},{"iso":"es","value":"Humidificador de aire"},{"iso":"de","value":"Luftbefeuchter"}],"description":[{"iso":"ru","value":"Сценарий управляет увлажнителем воздуха по логике: включает увлажнитель воздуха на заданное время с заданным интервалом времени до тех пор, пока датчик влажности воздуха не достигнет заданного значения.\n\nПервое включение после отработки заданного интервала времени."},{"iso":"en","value":"This home automation script controls air humidifier according to the logic: it turns on the air humidifier for a specified time with a specified time interval until the air humidity sensor reaches the set value.\n\nThe first inclusion after working out a specified time interval."},{"iso":"es","value":"Este script de automatización del hogar controla el humidificador de aire de acuerdo con la lógica: enciende el humidificador de aire durante un tiempo específico con un intervalo de tiempo específico hasta que el sensor de humedad del aire alcanza el valor establecido.\n\nLa primera inclusión después de trabajar un intervalo de tiempo especificado"},{"iso":"de","value":"Dieses Hausautomationsskript steuert den Luftbefeuchter gemäß der Logik: Es schaltet den Luftbefeuchter für eine bestimmte Zeit mit einem bestimmten Zeitintervall ein, bis der Luftfeuchtigkeitssensor den eingestellten Wert erreicht.\n\nDie erste Aufnahme nach Ausarbeitung eines bestimmten Zeitintervalls."}],"description_alt":[{"iso":"ru","value":"Сценарий управляет увлажнителем воздуха по логике: включает увлажнитель воздуха на заданное время с заданным интервалом времени до тех пор, пока датчик влажности воздуха не достигнет заданного значения.<br><br>Первое включение после отработки заданного интервала времени."},{"iso":"en","value":"This home automation script controls air humidifier according to the logic: it turns on the air humidifier for a specified time with a specified time interval until the air humidity sensor reaches the set value.<br><br>The first inclusion after working out a specified time interval."},{"iso":"es","value":"Este script de automatización del hogar controla el humidificador de aire de acuerdo con la lógica: enciende el humidificador de aire durante un tiempo específico con un intervalo de tiempo específico hasta que el sensor de humedad del aire alcanza el valor establecido.<br><br>La primera inclusión después de trabajar un intervalo de tiempo especificado"},{"iso":"de","value":"Dieses Hausautomationsskript steuert den Luftbefeuchter gemäß der Logik: Es schaltet den Luftbefeuchter für eine bestimmte Zeit mit einem bestimmten Zeitintervall ein, bis der Luftfeuchtigkeitssensor den eingestellten Wert erreicht.<br><br>Die erste Aufnahme nach Ausarbeitung eines bestimmten Zeitintervalls."}],"source":";source_zone equ 1 ; (param) zone id to take data from\n;watering_time equ 30 ; (param) time of watering phase (seconds)\n;delay equ 600 ; (param) time for delay (seconds)\n\n; common TOS sizes\nb equ 0\nw equ 1\ndw equ 2\n\n; push byte macro\npb macro\n psh (($1 >> 4) & 15)\n nib ($1 & 15)\nendm\n\n; push word macro\npw macro\n psh (($1 >> 12) & 15)\n nib (($1 >> 8) & 15)\n psh (($1 >> 4) & 15)\n nib ($1 & 15)\nendm\n\n; exp instruction with parameters\nex macro\n psh ($1 & 3)\n nib ((($3 & 1) << 3) | ($2 & 3))\n exp\nendm\n\n; stack template\n; - last state\n; - end time of delay or watering\n\n; BEGIN\n ; check last state\n ; if was active - jump to was_on\n ; else - check for a timer\n pop b\n snz\n bra 3\n pb was_on\n jmp b\n \ncheck_timer_on\n dup dw ; duplicate 'delay end time'\n ; check for a timer\n ; if timer exists - check timer\n ; if does not - start timer\n pop dw\n snz\n bra start_timer\n \ncheck_timer\n dup dw ; duplicate 'delay end time'\n psh TIMESTAMP\n inp b, dw\n ; compare current time with 'delay end time'\n ; if current time is greater - dispose timer and go check detector\n ; else - deactivate\n cmp dw\n skn\n bra do_deactivate\n pop dw ; -\n bra check_detector\n \nstart_timer\n pop dw ; dispose 'delay end time'\n ; calculate 'delay end time' and deactivate\n psh TIMESTAMP\n inp b, dw ; get curent time\n pw delay\n ex w, dw, 0\n add dw\n bra do_deactivate\n\ncheck_detector\n ; check detect flag of monitored zone\n ; if has flag - deactivate\n ; else - go to detector_inactive\n pw ZONE_DETECT_FLAG_BASE + source_zone - 1\n inp w, b\n pop b\n skz\n bra do_deactivate ; wet\n ; not wet\n \ndetector_inactive\n pop dw ; dispose all\n ; calculate 'watering time end' and activate\n pb TIMESTAMP\n inp b, dw\n pw watering_time\n ex w, dw, 0\n add dw\n bra do_activate\n \ndo_deactivate ; turn off relay\n psh 0\n ret\n \ndo_activate ; turn on relay\n psh 1\n ret\n\nwas_on\n dup dw ; duplicate 'watering time end'\n pb TIMESTAMP\n inp b, dw\n ; compare current time and 'watering time end'\n ; if current time is greater - dispose timer and deactivate\n ; else - continue, actiavate\n cmp dw\n skn\n bra do_activate\n pop dw\n bra do_deactivate","params":[{"name":"source_zone","format":"^([1-9]|[12][0-9]|3[0-2])$","type":"zone","description":[{"iso":"ru","value":"Отслеживаемая зона (датчик влажности)"},{"iso":"en","value":"Zone (moisture sensor)"},{"iso":"es","value":"Zona (sensor de humedad)"},{"iso":"de","value":"Überwachter Bereich (Feuchtigkeitssensor)"}]},{"name":"watering_time","format":"^([1-9]|[1-8][0-9]|9[0-9]|[1-8][0-9]{2}|9[0-8][0-9]|99[0-9]|[12][0-9]{3}|3[0-5][0-9]{2}|3600)$","type":"int","description":[{"iso":"ru","value":"Продолжительность работы (в секундах)"},{"iso":"en","value":"Duration (seconds)"},{"iso":"es","value":"Duración (en segundos)"},{"iso":"de","value":"Betriebsdauer (in Sekunden)"}]},{"name":"delay","format":"^([1-9]|[1-8][0-9]|9[0-9]|[1-8][0-9]{2}|9[0-8][0-9]|99[0-9]|[1-8][0-9]{3}|9[0-8][0-9]{2}|99[0-8][0-9]|999[0-9]|[1-5][0-9]{4}|6[0-4][0-9]{3}|65000)$","type":"int","description":[{"iso":"ru","value":"Интервал между периодами работы (в секундах)"},{"iso":"en","value":"Time interval between operation periods (seconds)"},{"iso":"es","value":"El intervalo de tiempo entre períodos de la operación"},{"iso":"de","value":"Zeitintervall zwischen Arbeitsperioden"}]}],"firmwares":["67111504","21954820","21889283","21954819","22020353","22020355","22020356","22151427","22216961","22216963","22216964","22282499","22348035","22413571","22479107","22544641","22544643","22610177","22610179","22675715","22741251","39452932","22806787","22872323","39584004","22937859","39649540","23068931","39846148","23134467","39911684","39977220","23265539","40042756","40173828","23527683","23593219","23265537","40435972","23658755","23724291","23789827","23855363","40632580","23920899","24117507","24183043"]}