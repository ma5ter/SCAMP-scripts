{"script_uid":"elctro-lock-3r2sge3-hifgh-hh5-el","category":[{"iso":"ru","value":"/Умный дом"},{"iso":"en","value":"/Smart Home"},{"iso":"es","value":"/Casa inteligente"},{"iso":"de","value":"/Smart Home"}],"name":[{"iso":"ru","value":"Электромеханический замок"},{"iso":"en","value":"Electromechanical lock"},{"iso":"es","value":"Cerradura electromecánica"},{"iso":"de","value":"Elektromechanisches Schloss"}],"description":[{"iso":"ru","value":"Назначение сценария:\nУправление электромеханическим замком непосредственно или имитация кнопки «выход» совместно со сторонним контроллером.\n\nПринцип работы:\n  • Реле включается при нажатии кнопки управления «Открыть» и начинается отсчёт длительности импульса.\n  • Реле выключается по истечении времени импульса для открытия замка.\n  • Повторные нажатия на кнопку «открыть» в момент, когда реле включено должны игнорироваться.\n\nДополнительные параметры:\nИнверсия."},{"iso":"en","value":"Scenario purpose:\nControlling the electromechanical lock directly or simulating the «exit» button in conjunction with a third-party controller.\n\nPrinciple of operation:\n  • The relay is turned on when the «Open» control button is pushed then opening duration time counting started.\n  • The relay is turned off after the opening duration time.\n  • Repeated pushing of the «open» button at the moment when the relay is turned on should be ignored.\n\nAdditional parameters:\nInversion."},{"iso":"es","value":"Designación del escenario:\nControl de una cerradura electromecánica directamente o imitación del botón de “Salida” junto con un controlador de terceros.\n\nPrincipio de funcionamiento:\n  • El relé se activa cuando se presiona el botón “Abrir” y comienza la cuenta atrás.\n  • El relé se desconecta cuando ha transcurrido el tiempo para la apertura de la cerradura\n  • Debe ignorarse la pulsación repetida del botón “Abrir” en el momento en que se activa el relé.\n\nOpciones extra:\nInversión."},{"iso":"de","value":"Funktion:\nDirekte Steuerung des elektromechanischen Schlosses oder Simulation der Taste “Beenden” in Verbindung mit einem Drittanbieter-Controller.\n\nFunktionsprinzip:\n  • Das Relais schaltet sich ein, sobald die Taste “Öffnen” gedrückt wird und der Countdown beginnt.\n  • Das Relais wird nach Ablauf der Zeit zum Öffnen des Schlosses ausgeschaltet.\n  • Das erneute Drücken der Taste “Öffnen” bei eingeschaltetem Relais sollte ignoriert werden.\n\nZusätzliche Optionen:\nInversion."}],"description_alt":[{"iso":"ru","value":"Назначение сценария:<br>  • Управление электромеханическим замком непосредственно или имитация кнопки «выход» совместно со сторонним контроллером.<br><br>Принцип работы:<br>  • Реле включается при нажатии кнопки управления «Открыть» и начинается отсчёт длительности импульса.<br>  • Реле выключается по истечении времени импульса для открытия замка.<br>  • Повторные нажатия на кнопку «открыть» в момент, когда реле включено должны игнорироваться.<br><br>Дополнительные параметры:<br>  • Инверсия."},{"iso":"en","value":"Scenario purpose:<br>Controlling the electromechanical lock directly or simulating the «exit» button in conjunction with a third-party controller.<br><br>Principle of operation:<br>  • The relay is turned on when the «Open» control button is pushed then opening duration time counting started.<br>  • The relay is turned off after the opening duration time.<br>  • Repeated pushing of the «open» button at the moment when the relay is turned on should be ignored.<br><br>Additional parameters:<br>Inversion."},{"iso":"es","value":"Designación del escenario:<br>Control de una cerradura electromecánica directamente o imitación del botón de “Salida” junto con un controlador de terceros.<br><br>Principio de funcionamiento:<br>  • El relé se activa cuando se presiona el botón “Abrir” y comienza la cuenta atrás.<br>  • El relé se desconecta cuando ha transcurrido el tiempo para la apertura de la cerradura<br>  • Debe ignorarse la pulsación repetida del botón “Abrir” en el momento en que se activa el relé.<br><br>Opciones extra:<br>Inversión."},{"iso":"de","value":"Funktion:<br>Direkte Steuerung des elektromechanischen Schlosses oder Simulation der Taste “Beenden” in Verbindung mit einem Drittanbieter-Controller.<br><br>Funktionsprinzip:<br>  • Das Relais schaltet sich ein, sobald die Taste “Öffnen” gedrückt wird und der Countdown beginnt.<br>  • Das Relais wird nach Ablauf der Zeit zum Öffnen des Schlosses ausgeschaltet.<br>  • Das erneute Drücken der Taste “Öffnen” bei eingeschaltetem Relais sollte ignoriert werden.<br><br>Zusätzliche Optionen:<br>Inversion."}],"source":"; common TOS sizes\nb equ 0\nw equ 1\ndw equ 2\n\n;duration equ 5 ; (param) duration of relay action after switch\n;action equ 1; (param) relay action value\n\npb macro ; byte\n psh (($1 >> 4) & 15)\n nib ($1 & 15)\nendm\n\n; push word macro\npw macro\n psh (($1 >> 12) & 15)\n nib (($1 >> 8) & 15)\n psh (($1 >> 4) & 15)\n nib ($1 & 15)\nendm\n\n; exp instruction with parameters\nex macro\n psh ($1 & 3)\n nib ((($3 & 1) << 3) | ($2 & 3))\n exp\nendm\n\n; BEGIN\n ; check last state\n ; if was active - check timer\n ; else - check switch\n psh action\n xor b\n pop b\n skz\n bra check_switch ; was off\n ; was on, check_timer\n\ncheck_timer\n dup dw ; save 'timer end time'\n psh TIMESTAMP\n inp b, dw\n ; compare 'current tme' and 'timer end time'\n ; if 'current time' greater - dispose all and set off\n ; else - set on\n cmp dw\n skp\n bra dis\n ; dispose any switch command and ignore result\n pb HAS_SWITCH\n inp b, b\n pop b\n bra set_on\n \ndis\n pop dw\n bra set_off\n \ncheck_switch\n ; read switch value\n pb HAS_SWITCH\n inp b, b\n pop b\n ; if has switch - start timer\n ; else - set off\n snz\n bra set_off ; wait\n ; start timer and switch on\n \nstart_timer\n psh TIMESTAMP\n inp b, dw\n pw duration\n ex w, dw, 1\n add dw ; calculate 'timer end time'\n\nset_on\n psh action & 1\n ret\n \nset_off\n psh ~action & 1\n ret","extra":{"switch":{"rows":[{"items":[{"content":[{"iso":"ru","value":"Открыть"},{"iso":"en","value":"Open"},{"iso":"es","value":"Abrir"},{"iso":"de","value":"Öffnen"}],"value":1}]}],"size":1}},"params":[{"name":"duration","format":"^([0-9]|[1-8][0-9]|9[0-9]|[1-8][0-9]{2}|9[0-8][0-9]|99[0-9]|[1-8][0-9]{3}|9[0-8][0-9]{2}|99[0-8][0-9]|999[0-9]|10[0-7][0-9]{2}|10800)$","type":"int","description":[{"iso":"ru","value":"Время (сек)"},{"iso":"en","value":"Time (sec)"},{"iso":"es","value":"Tiempo (seg.)"},{"iso":"de","value":"Zeit (Sek.)"}]},{"name":"action","format":"^([01])$","type":"list","default":"1","extra":[{"name":"turn_on","description":[{"iso":"ru","value":"Включать реле"},{"iso":"en","value":"Turn on"},{"iso":"es","value":"Encender"},{"iso":"de","value":"Anmachen"}],"value":"1"},{"name":"turn_off","description":[{"iso":"ru","value":"Выключать реле"},{"iso":"en","value":"Turn off"},{"iso":"es","value":"Apagar"},{"iso":"de","value":"Schalte aus"}],"value":"0"}],"description":[{"iso":"ru","value":"Действие"},{"iso":"en","value":"Action"},{"iso":"es","value":"Acción"},{"iso":"de","value":"Aktion"}]}],"firmwares":["67111504","21954820","21889283","21954819","22020353","22020355","22020356","22151427","22216961","22216963","22216964","22282499","22348035","22413571","22479107","22544641","22544643","39452932","22610177","22610179","22675715","22741251","22806787","22872323","39584004","22937859","39649540","23068931","39846148","23134467","39911684","39977220","23265539","40042756","40173828","23527683","23593219","23265537","40435972","23658755","23724291","23789827","23855363","40632580","23920899","24117507","24183043"]}