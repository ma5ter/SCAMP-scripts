{"script_uid":"guard-armdis-secti-origf9-g4t-01","category":[{"iso":"ru","value":"/Охрана"},{"iso":"en","value":"/Protection"},{"iso":"es","value":"/Protección"},{"iso":"de","value":"/Sicherheit"}],"name":[{"iso":"ru","value":"Взят/Снят"},{"iso":"en","value":"Armed/Disarmed"},{"iso":"es","value":"Armado/Desarmado"},{"iso":"de","value":"Scharf/Unscharf"}],"description":[{"iso":"ru","value":"Сценарий 'Взят/Снят' меняет состояние управляемого им реле в зависимости от состояния по взятию/снятию отслеживаемых разделов следующим образом:\n - выход включается при постановке на охрану всех отслеживаемых разделов(если установлено время задержки, то по его истечению);\n - выход выключается при снятии с охраны любого из отслеживаемых разделов;\n - реле будет включено во время задержки, если ее не учитывать.\n\nДля применения обратной логики работы сценария необходимо включить инверсию при настройке параметров сценария."},{"iso":"en","value":"The 'Armed/Disarmed' scenario changes the state of the output depending on the state (armed/disarmed) of the assigned partitions as follows:\n - the output is turned on when arming all assigned partitions (on expiry of delay time, if it is set);\n - the output is turned off when disarming any of the assigned partitions.\n\nThe scenario is inverted by setting Inversion parameter to ON."},{"iso":"es","value":"El escenario 'Armado/Desarmado' cambia el estado de la salida según el estado (armado/desarmado) de las secciones asignadas de la siguiente manera:\n - la salida se enciende al armar todas las secciones asignadas (después del tiempo de retraso, si está configurado);\n - la salida se apaga al desarmar cualquiera de las secciones asignadas.\n\nPara utilizar la lógica inversa del escenario, es necesario activar el parámetro Inversión."},{"iso":"de","value":"Das Szenario „Scharf/Unscharf“ ändert den Zustand des gesteuerten Relais in Abhängigkeit vom Zustand (scharf/unscharf) der überwachten Bereiche wie folgt: der Ausgang schaltet sich nach Ablauf der Verzögerungszeit (falls eingestellt) aus, sobald alle überwachten Bereiche scharfgeschaltet werden;  der Ausgang schaltet sich aus bei Unscharfschaltung eines der überwachten Bereiche. Für die umgekehrte Logik des Szenarios muss bei der Konfiguration von Szenarioparametern die Invertierung aktiviert werden."}],"description_alt":[{"iso":"ru","value":"Сценарий <b>Взят/Снят</b> меняет состояние управляемого им реле в зависимости от состояния <b>взятия/снятия</b> отслеживаемых разделов следующим образом:<br><br> - реле <b>включается</b> при постановке на охрану всех отслеживаемых разделов(если установлено время задержки, то по его истечению);<br> - <b>выключается</b> при снятии с охраны любого из отслеживаемых разделов;<br> - реле будет <b>включено</b> во время задержки, если ее не учитывать.<br><br>Для применения обратной логики работы сценария необходимо включить инверсию при настройке параметров сценария"},{"iso":"en","value":"The <b>Armed/Disarmed</b> scenario changes the state of the output depending on the state <b>armed/disarmed</b> of the assigned partitions as follows: <br> <br>-output is turned <b>ON</ b > when arming all assigned partitions (on expiry of delay time, if it is set); <br>-output is turned <b>OFF</b> when disarming any of the assigned partitions. <br> <br> The scenario is inverted by setting Inversion parameter to ON."},{"iso":"es","value":"El escenario <b>Armado/Desarmado</b> cambia el estado de la salida según el estado <b>armado/desarmado</b> de las secciones asignadas de la siguiente manera: <br> <br>-salida <b>se enciende</b> al armar todas las secciones asignadas (después del tiempo de retraso, si está configurado); <br>-salida <b>se apaga</b> al desarmar cualquiera de las secciones asignadas. <br> <br> Para utilizar la lógica inversa del escenario, es necesario activar el parámetro Inversión."},{"iso":"de","value":"Das Szenario <b>Scharf/Unscharf</b> ändert den Zustand des gesteuerten Relais in Abhängigkeit vom Zustand <b>\"scharf/unscharf\"</b> der überwachten Bereiche wie folgt:<br>- das Relais <b>schaltet sich ein,</b> nach Ablauf der Verzögerungszeit (falls eingestellt), sobald alle überwachten Bereiche scharfgeschaltet werden;<br>- das Relais <b>schaltet sich aus</b> bei Unscharfschaltung eines der überwachten Bereiche.<br><br> Für die umgekehrte Logik des Szenarios muss bei der Konfiguration von Szenarioparametern die Invertierung aktiviert werden."}],"source":"; common TOS sizes\nb equ 0\n\n;action equ 1 ;(param) active state\n;sections equ 3 ;(param) monitoring sections\n;check_exit_delay equ 1 ;(param) flag that determines whether the relay should be turned off during the exit delay, or turned on (if 1 - turn off, if 0 - turn on)\n;check_entry_delay equ 1 ;(param) flag that determines whether the relay should be turned off during the entry delay, or turned on (if 1 - turn off, if 0 - turn on)\n\npb macro ; byte\n psh (($1 >> 4) & 15)\n nib ($1 & 15)\nendm\n\n; BEGIN\n pop b ; dispose previous result\n\n ; set off if no selected sections\n pb sections\n pop b\n snz\n ret\n \ncheck_exit\n ; check exit delay\n ; if yes - read check_exit_delay param flag\n ; else - go check entry delay\n psh EXIT_DELAY\n inp b, b\n pop b\n snz\n bra check_entry ; 0\n ; read check_exit_delay param flag\n ; if 0 - set on\n ; else - set off\n psh check_exit_delay ; 1\n pop b\n skz\n bra set_off ; 1\n bra set_on ; 0\n \ncheck_entry\n ; check entry delay\n ; if yes - read check_entry_delay param flag\n ; else - go check arm\n psh ENTRY_DELAY\n inp b, b\n pop b\n snz\n bra check_arm ; 0\n ; read check_entry_delay param flag\n ; if 0 - set on\n ; else - set off\n psh check_entry_delay ; 1\n pop b\n skz\n bra set_off ; 1\n bra set_on ; 0\n\ncheck_arm\n ; get monitored armed guard and always armed sections mask\n pb sections \n dup b ; save monitored sections mask \n ; get armed guard sections\n pb ARMED_SECTIONS\n inp b, b\n ; get all sections mask but guard\n pb GUARD_SECTIONS\n inp b, b\n inv b\n ior b ; combine 'armed guard sections mask' and 'all sections mask but guard'\n and b ; select only monitored sections\n ; compare armed sections with selected sections\n ; if all selected sections are srmed or always armed - set on\n ; else - set off\n cmp b\n snz\n bra set_on ; 0\n\nset_off\n psh ~action & 1\n ret\n\nset_on\n psh action & 1\n ret","params":[{"name":"action","format":"^([01])$","type":"list","default":"1","extra":[{"name":"turn_on","description":[{"iso":"ru","value":"Нет"},{"iso":"en","value":"OFF"},{"iso":"es","value":"Desactivado"},{"iso":"de","value":"Nein"}],"value":"1"},{"name":"turn_off","description":[{"iso":"ru","value":"Да"},{"iso":"en","value":"ON"},{"iso":"es","value":"Activado"},{"iso":"de","value":"Ja"}],"value":"0"}],"description":[{"iso":"ru","value":"Инверсия"},{"iso":"en","value":"Inversion"},{"iso":"es","value":"Inversión"},{"iso":"de","value":"Invertieren"}]},{"name":"sections","format":"^([0-9]|[1-8][0-9]|9[0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$","type":"sections","extra":[{"name":"section_type","value":"1"}],"description":[{"iso":"ru","value":"Отслеживаемые разделы"},{"iso":"en","value":"Partitions"},{"iso":"es","value":"Secciones "},{"iso":"de","value":"Überwachte Bereiche"}]},{"name":"check_exit_delay","format":"^([01])$","type":"list","default":"1","extra":[{"name":"consider","description":[{"iso":"ru","value":"Учитывать"},{"iso":"en","value":"Consider"},{"iso":"es","value":""},{"iso":"de","value":""}],"value":"1"},{"name":"ignore","description":[{"iso":"ru","value":"Не учитывать"},{"iso":"en","value":"Ignore"},{"iso":"es","value":""},{"iso":"de","value":""}],"value":"0"}],"description":[{"iso":"ru","value":"Задержка на выход"},{"iso":"en","value":"Exit delay"},{"iso":"es","value":""},{"iso":"de","value":""}]},{"name":"check_entry_delay","format":"^([01])$","type":"list","default":"0","extra":[{"name":"consider","description":[{"iso":"ru","value":"Учитывать"},{"iso":"en","value":"Consider"},{"iso":"es","value":""},{"iso":"de","value":""}],"value":"1"},{"name":"ignore","description":[{"iso":"ru","value":"Не учитывать"},{"iso":"en","value":"Ignore"},{"iso":"es","value":""},{"iso":"de","value":""}],"value":"0"}],"description":[{"iso":"ru","value":"Задержка на вход"},{"iso":"en","value":"Entry delay"},{"iso":"es","value":""},{"iso":"de","value":""}]}],"firmwares":["67111504","21954820","21889283","21954819","22020353","22020355","22020356","22151427","22216961","22216963","22216964","22282499","22348035","22413571","22479107","22544641","22544643","22610177","22610179","22675715","22741251","39452932","22806787","22872323","39584004","22937859","39649540","23068931","39846148","23134467","39911684","39977220","23265539","40042756","40173828","23527683","23593219","23265537","40435972","23658755","23724291","23789827","23855363","40632580","23920899","24117507","24183043"]}